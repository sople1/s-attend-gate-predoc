# 사용자 앱 시나리오 (다중 행사 지원)

## 🎯 개요

여러 행사에 참가할 수 있는 **개인용 출석 체크 앱**의 시나리오입니다.
한 번 설치로 다양한 행사에 참가 가능하며, 행사별 출입 기록을 개별 관리합니다.

---

## 📱 앱 특징

```
앱 유형: 모바일 앱 (iOS/Android)
대상 사용자: 행사 참가자
설치 방식: App Store/Google Play 단일 앱
데이터 구조: 다중 행사 지원

핵심 기능:
- 다중 행사 참가 관리
- 행사별 독립적 출석 기록
- 토큰 기반 행사 참가
- 오프라인 모드 지원
```

---

## 🔗 행사 참가 프로세스

### 1. 첫 번째 행사 참가
```
시나리오: 새로운 사용자가 첫 행사에 참가

1. 앱 다운로드 및 설치
   └ "S-Attend Gate" 앱 설치

2. 행사 참가 토큰 입력
   └ 이메일/SMS로 받은 토큰: "SPRING2024-abc123"
   └ 또는 QR 코드 스캔으로 토큰 자동 입력

3. 사용자 프로필 생성
   ┌─────────────────────────────────────┐
   │ 👤 프로필 설정                     │
   │                                     │
   │ 이름: [김철수]                     │
   │ 이메일: [kim@email.com]            │
   │ 연락처: [010-1234-5678]            │
   │                                     │
   │ ✅ 개인정보 처리 동의               │
   │ ✅ 위치 서비스 이용 동의            │
   │                                     │
   │ [저장하기]                          │
   └─────────────────────────────────────┘

4. 행사 정보 자동 다운로드
   └ 토큰 검증 후 해당 행사 정보 수신
   └ 게이트 위치, 비콘 정보, 행사 일정 등

5. 권한 설정 안내
   - 위치 서비스: "항상 허용"
   - 블루투스: 허용
   - 알림: 허용
   - 카메라: QR 스캔용
```

### 2. 추가 행사 참가
```
시나리오: 기존 사용자가 새로운 행사에 참가

1. 새 행사 토큰 수신
   └ "SUMMER2024-def456" 토큰 이메일/SMS 수신

2. 토큰 입력 또는 QR 스캔
   └ 앱 내 "새 행사 참가" 메뉴에서 토큰 입력

3. 행사 참가 확인
   ┌─────────────────────────────────────┐
   │ 🎉 새 행사 참가                    │
   │                                     │
   │ Summer Festival 2024               │
   │ 📅 2024년 8월 15일                 │
   │ 📍 잠실 올림픽공원                 │
   │                                     │
   │ 기존 프로필을 사용하시겠습니까?     │
   │ 👤 김철수 (kim@email.com)          │
   │                                     │
   │ [기존 프로필 사용] [새 프로필]      │
   └─────────────────────────────────────┘

4. 행사 정보 추가 저장
   └ 새 행사 정보가 기존 앱 데이터에 추가

5. 참가 완료 알림
   └ 행사 주최측에 참가 완료 알림 자동 전송
```

---

## 📊 앱 내 행사 관리

### 1. 메인 화면 (다중 행사)
```
앱 메인 화면 레이아웃:

┌─────────────────────────────────────┐
│ 🎪 S-Attend Gate                   │
│                                     │
│ 📅 오늘의 행사:                    │
│ ┌─ Spring Conference 2024 ────────┐ │
│ │ 📍 코엑스 A홀                   │ │
│ │ 🕘 09:00-18:00 (1시간 남음)     │ │
│ │ ✅ 출석 완료 (09:15)            │ │
│ │ [상세보기] [재출석체크]          │ │
│ └─────────────────────────────────┘ │
│                                     │
│ 📅 예정된 행사:                    │
│ ┌─ Summer Festival ───────────────┐ │
│ │ 📍 잠실 올림픽공원              │ │
│ │ 🕘 8월 15일 (40일 후)           │ │
│ │ ⏳ 출석 체크 예정               │ │
│ └─────────────────────────────────┘ │
│                                     │
│ 📅 지난 행사:                      │
│ ┌─ Winter Workshop ───────────────┐ │
│ │ 📍 삼성동 코워킹스페이스        │ │
│ │ 🕘 3월 20일 완료                │ │
│ │ ✅ 출석 완료 (정시)             │ │
│ │ [기록 보기]                     │ │
│ └─────────────────────────────────┘ │
│                                     │
│ [➕ 새 행사 참가] [⚙️ 설정]        │
└─────────────────────────────────────┘

하단 탭:
[🏠 홈] [📊 기록] [⚙️ 설정] [❓ 도움말]
```

### 2. 행사별 상세 화면
```
개별 행사 상세 정보:

┌─────────────────────────────────────┐
│ 📅 Spring Conference 2024          │
│                                     │
│ 📍 행사 정보:                      │
│ • 장소: 코엑스 컨퍼런스룸 A홀      │
│ • 일시: 2024.07.15 09:00-18:00     │
│ • 주소: 서울시 강남구 영동대로 513  │
│                                     │
│ ✅ 출석 현황:                      │
│ • 출석 시간: 09:15:23              │
│ • 출석 방법: 자동 감지 (BLE)       │
│ • 게이트: 메인 입구 (Gate A)       │
│ • 상태: 출석 완료                  │
│                                     │
│ 🎫 내 정보:                        │
│ • 참가번호: SPRING2024-001         │
│ • 등록명: 김철수                   │
│ • 연락처: 010-1234-5678            │
│                                     │
│ 🔧 설정:                           │
│ • 자동 출석 체크: ✅ 활성화         │
│ • 출석 알림: ✅ 활성화             │
│ • 위치 서비스: ✅ 허용됨           │
│                                     │
│ [📱 수동 출석 체크] [🎫 QR 보기]    │
│ [📧 주최자 문의] [🗑️ 행사 삭제]     │
└─────────────────────────────────────┘
```

---

## 📡 출석 체크 프로세스

### 1. 자동 출석 체크 (BLE)
```
백그라운드 자동 출석 시나리오:

1. 행사 당일 자동 모니터링 시작
   └ 설정된 행사 시간 30분 전부터 BLE 스캔 활성화

2. 게이트 근처 도착 시 자동 감지
   └ 비콘 신호 감지 → GPS 위치 확인 → 자동 출석 처리

3. 출석 완료 알림
   ┌─────────────────────────────────────┐
   │ ✅ 출석 체크 완료!                  │
   │                                     │
   │ Spring Conference 2024             │
   │ 📍 메인 입구 (Gate A)              │
   │ 🕘 09:15:23 출석 완료              │
   │                                     │
   │ 행사를 즐겨보세요! 🎉              │
   │                                     │
   │ [상세보기] [알림 끄기]              │
   └─────────────────────────────────────┘

4. 서버 동기화
   └ 출석 기록 즉시 서버 전송 및 확인
```

### 2. 수동 출석 체크
```
문제 상황 시 수동 출석:

1. 자동 감지 실패 시
   └ 앱에서 "수동 출석 체크" 버튼 표시

2. 수동 출석 방법 선택
   ┌─────────────────────────────────────┐
   │ 📱 수동 출석 체크                  │
   │                                     │
   │ 자동 출석이 되지 않나요?            │
   │ 아래 방법 중 하나를 선택하세요:     │
   │                                     │
   │ [📷 게이트 QR 스캔]                │
   │ [🎫 내 QR 보여주기]                │
   │ [🆘 관리자 도움 요청]              │
   │                                     │
   │ [뒤로 가기]                         │
   └─────────────────────────────────────┘

3. 처리 방법별 프로세스
   a) 게이트 QR 스캔: 게이트에 부착된 QR 스캔
   b) 내 QR 보여주기: 개인 QR 생성하여 관리자에게 제시
   c) 관리자 도움 요청: 현장 관리자에게 알림 전송
```

---

## 💾 데이터 구조

### 1. 로컬 저장소 구조
```javascript
{
  "userProfile": {
    "userId": "user_unique_id_12345",
    "name": "김철수",
    "email": "kim@email.com",
    "phone": "010-1234-5678",
    "registeredAt": "2024-03-15T10:30:00Z"
  },
  "events": {
    "spring2024": {
      "eventInfo": {
        "eventId": "spring2024",
        "eventName": "Spring Conference 2024",
        "eventDate": "2024-07-15",
        "venue": "코엑스 컨퍼런스룸 A홀",
        "serverEndpoint": "https://spring2024.attend-api.com",
        "organizerContact": "events@springconf.com"
      },
      "attendeeInfo": {
        "attendeeId": "SPRING2024-001",
        "token": "abc123def456",
        "qrCode": "generated_qr_data",
        "registeredAt": "2024-07-01T14:20:00Z"
      },
      "gateInfo": [
        {
          "gateId": "gate_a",
          "gateName": "메인 입구",
          "beaconIds": ["BLE-001", "BLE-002"],
          "location": {"lat": 37.5123, "lng": 127.0456}
        }
      ],
      "attendanceHistory": [
        {
          "timestamp": "2024-07-15T09:15:23Z",
          "method": "auto_ble",
          "gateId": "gate_a",
          "status": "success",
          "serverConfirmed": true
        }
      ]
    },
    "summer2024": {
      // 다른 행사 정보...
    }
  },
  "settings": {
    "autoCheckin": true,
    "notifications": true,
    "dataUsage": "wifi_only",
    "offlineMode": true
  }
}
```

### 2. 서버 연동 방식
```
행사별 독립적 서버 연동:

1. 토큰 검증 및 행사 정보 다운로드
   POST https://spring2024.attend-api.com/auth/verify
   {
     "token": "abc123def456",
     "deviceId": "device_unique_id"
   }

2. 출석 체크 데이터 전송
   POST https://spring2024.attend-api.com/attendance/checkin
   {
     "attendeeId": "SPRING2024-001",
     "timestamp": "2024-07-15T09:15:23Z",
     "method": "auto_ble",
     "gateId": "gate_a",
     "location": {"lat": 37.5123, "lng": 127.0456}
   }

3. 서버별 독립적 처리
   └ 각 행사마다 다른 서버 엔드포인트 사용
   └ 행사별 개별 인증 및 데이터 처리
```

---

## 🔒 보안 및 프라이버시

### 1. 데이터 보안
```
보안 원칙:
- 행사별 토큰 기반 인증
- 로컬 데이터 암호화 저장
- 서버 통신 TLS 1.3 사용
- 개인정보 최소 수집

데이터 보관:
- 행사 종료 후 1년간 로컬 보관
- 사용자 요청 시 즉시 삭제
- 서버 연동 시에만 최소 정보 전송
```

### 2. 권한 관리
```
필수 권한:
- 위치 서비스: BLE 및 GPS 기반 출석 체크
- 블루투스: 비콘 신호 감지
- 카메라: QR 코드 스캔

선택 권한:
- 알림: 출석 완료 및 행사 안내 알림
- 연락처: 빠른 프로필 입력 (선택)

권한 거부 시 대안:
- 위치 거부: 수동 출석 체크만 가능
- 카메라 거부: 관리자 도움 요청 사용
```

---

## 🔧 오프라인 지원

### 1. 오프라인 모드
```
네트워크 없는 환경에서의 동작:

1. 기본 출석 체크 지원
   └ 로컬 BLE 감지 및 GPS 기록
   └ 출석 데이터 로컬 임시 저장

2. 네트워크 복구 시 자동 동기화
   └ 저장된 출석 데이터 서버 전송
   └ 서버 응답 확인 및 상태 업데이트

3. 오프라인 상태 표시
   ┌─────────────────────────────────────┐
   │ 📡 오프라인 모드                   │
   │                                     │
   │ 네트워크에 연결되지 않았습니다.     │
   │ 출석 체크는 정상 진행되며,          │
   │ 연결 시 자동으로 동기화됩니다.      │
   │                                     │
   │ 📱 로컬 출석 기록: 3건 대기 중      │
   │                                     │
   │ [네트워크 설정] [수동 동기화]       │
   └─────────────────────────────────────┘
```

---

## 📊 사용자 경험 최적화

### 1. 개인화 기능
```
사용자별 맞춤 설정:

- 자주 참가하는 행사 유형 학습
- 선호하는 출석 방법 기억
- 개인 일정과 행사 일정 연동
- 맞춤형 알림 시간 설정
```

### 2. 접근성 지원
```
다양한 사용자 고려:

- 큰 글씨 모드 지원
- 고대비 색상 테마
- 음성 안내 기능
- 진동 패턴 커스터마이징
- 간단 모드 (핵심 기능만)
```
